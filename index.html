<!DOCTYPE html>
<html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<body>

<h2>Spin Up Your Node</h2>
<p>Digital Ocean API Token</p> 
<p><input type="text" id="token"></p>
<p>SSH Fingerprint</p> 
<p><input type="text" id="fingerprint"></p>
<button type="button" onclick="execute()">Create VPS</button>

<p id="dasinfo"></p>

<script>

function execute() {
	var token = $("#token").val();
	if ( $("#fingerprint").val() == '' ) {
		var fingerprint = null;
	} else {
		var fingerprint = [$("#fingerprint").val()];
	}

	var dodata = new Object();
	dodata.name = "obdroplet-" + Math.floor((Math.random() * 1000) + 1);
	dodata.region = "nyc3";
	dodata.size = "1gb";
	dodata.image = "ubuntu-16-04-x64";
	dodata.ssh_keys = fingerprint;
	dodata.backups = false;
	dodata.ipv6 = false;
	dodata.user_data = null;
	dodata.private_networking = null;
	dodata.volumes = null;

	var readytosend = JSON.stringify(dodata);

	console.log(token);
	console.log(fingerprint);
	console.log(readytosend);

	$.ajax({
		url: "https://api.digitalocean.com/v2/droplets",
		beforeSend: function(xhr) { 
			xhr.setRequestHeader("Authorization", "BEARER " + token ); 
		},
		type: 'POST',
		dataType: 'json',
		contentType: 'application/json',
		processData: true,
		data: readytosend,

	success: function (data) {
		$('#dasinfo').text("Success! You have a new 1 GB RAM droplet deployed in NYC running Ubuntu 16.04.1 x64. Check your Digital Ocean dashboard for more details.");
		console.log(JSON.stringify(data));
		},
	error: function(){
		$('#dasinfo').text("Something went wrong. Check the console log.");
		console.log(JSON.stringify(data));
	}
	});

}
</script>
</body>
</html>
